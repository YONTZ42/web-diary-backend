openapi: 3.0.3
info:
  title: API Documentation
  version: 1.0.0
  description: APIの詳細説明
paths:
  /api/auth/guest/:
    post:
      operationId: auth_guest_create
      tags:
      - Auth
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuestIssueResponse'
          description: ''
  /api/auth/register/:
    post:
      operationId: auth_register_create
      description: ユーザー新規登録
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegistration'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegistration'
        required: true
      security:
      - jwtAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRegistration'
          description: ''
  /api/exhibits/:
    get:
      operationId: exhibits_list
      tags:
      - exhibits
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Exhibit'
          description: ''
    post:
      operationId: exhibits_create
      tags:
      - exhibits
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Exhibit'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Exhibit'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Exhibit'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
  /api/exhibits/{id}/:
    get:
      operationId: exhibits_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this exhibit.
        required: true
      tags:
      - exhibits
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
    put:
      operationId: exhibits_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this exhibit.
        required: true
      tags:
      - exhibits
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Exhibit'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Exhibit'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Exhibit'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
    patch:
      operationId: exhibits_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this exhibit.
        required: true
      tags:
      - exhibits
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedExhibit'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedExhibit'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedExhibit'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
    delete:
      operationId: exhibits_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this exhibit.
        required: true
      tags:
      - exhibits
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/galleries/:
    get:
      operationId: galleries_list
      tags:
      - galleries
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Gallery'
          description: ''
    post:
      operationId: galleries_create
      tags:
      - galleries
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Gallery'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Gallery'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Gallery'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Gallery'
          description: ''
  /api/galleries/{gallery_id}/exhibits/:
    post:
      operationId: galleries_exhibits_create
      description: 'ネスト型: Exhibit追加（空枠に追加）'
      parameters:
      - in: path
        name: gallery_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - galleries
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Exhibit'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Exhibit'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Exhibit'
        required: true
      security:
      - jwtAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
        '400':
          description: Bad Request
        '401':
          description: Not Authenticated
        '403':
          description: Forbidden
        '409':
          description: Slot already occupied
  /api/galleries/{gallery_id}/exhibits/{slot_index}/:
    put:
      operationId: galleries_exhibits_update
      description: 'ネスト型: slot_index 指定で作成 or 置換（推奨）'
      parameters:
      - in: path
        name: gallery_id
        schema:
          type: string
          format: uuid
        required: true
      - in: path
        name: slot_index
        schema:
          type: integer
        required: true
      tags:
      - galleries
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Exhibit'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Exhibit'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Exhibit'
        required: true
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Exhibit'
          description: ''
        '400':
          description: Bad Request
        '401':
          description: Not Authenticated
        '403':
          description: Forbidden
    delete:
      operationId: galleries_exhibits_destroy
      description: 'ネスト型: slot_index 指定で作成 or 置換（推奨）'
      parameters:
      - in: path
        name: gallery_id
        schema:
          type: string
          format: uuid
        required: true
      - in: path
        name: slot_index
        schema:
          type: integer
        required: true
      tags:
      - galleries
      security:
      - jwtAuth: []
      - {}
      responses:
        '204':
          description: Deleted
        '401':
          description: Not Authenticated
        '403':
          description: Forbidden
        '404':
          description: Not found
  /api/galleries/{id}/:
    get:
      operationId: galleries_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this gallery.
        required: true
      tags:
      - galleries
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Gallery'
          description: ''
    put:
      operationId: galleries_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this gallery.
        required: true
      tags:
      - galleries
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Gallery'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Gallery'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Gallery'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Gallery'
          description: ''
    patch:
      operationId: galleries_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this gallery.
        required: true
      tags:
      - galleries
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedGallery'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedGallery'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedGallery'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Gallery'
          description: ''
    delete:
      operationId: galleries_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this gallery.
        required: true
      tags:
      - galleries
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/galleries/g/{slug}/:
    get:
      operationId: galleries_g_retrieve
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - galleries
      security:
      - jwtAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GalleryPublic'
          description: ''
  /api/me/:
    get:
      operationId: me_retrieve
      description: 自分のプロフィール取得・更新
      tags:
      - me
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
    put:
      operationId: me_update
      description: 自分のプロフィール取得・更新
      tags:
      - me
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/User'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
    patch:
      operationId: me_partial_update
      description: 自分のプロフィール取得・更新
      tags:
      - me
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUser'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUser'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUser'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/notebooks/:
    get:
      operationId: notebooks_list
      tags:
      - notebooks
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notebook'
          description: ''
    post:
      operationId: notebooks_create
      tags:
      - notebooks
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Notebook'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Notebook'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Notebook'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notebook'
          description: ''
  /api/notebooks/{id}/:
    get:
      operationId: notebooks_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this notebook.
        required: true
      tags:
      - notebooks
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notebook'
          description: ''
    put:
      operationId: notebooks_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this notebook.
        required: true
      tags:
      - notebooks
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Notebook'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Notebook'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Notebook'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notebook'
          description: ''
    patch:
      operationId: notebooks_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this notebook.
        required: true
      tags:
      - notebooks
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedNotebook'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedNotebook'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedNotebook'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notebook'
          description: ''
    delete:
      operationId: notebooks_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this notebook.
        required: true
      tags:
      - notebooks
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/notebooks/{id}/pages/:
    get:
      operationId: notebooks_pages_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this notebook.
        required: true
      tags:
      - notebooks
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notebook'
          description: ''
  /api/pages/:
    get:
      operationId: pages_list
      tags:
      - pages
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Page'
          description: ''
    post:
      operationId: pages_create
      tags:
      - pages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Page'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Page'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Page'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Page'
          description: ''
  /api/pages/{id}/:
    get:
      operationId: pages_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this page.
        required: true
      tags:
      - pages
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Page'
          description: ''
    put:
      operationId: pages_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this page.
        required: true
      tags:
      - pages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Page'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Page'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Page'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Page'
          description: ''
    patch:
      operationId: pages_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this page.
        required: true
      tags:
      - pages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPage'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPage'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPage'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Page'
          description: ''
    delete:
      operationId: pages_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this page.
        required: true
      tags:
      - pages
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/schedules/:
    get:
      operationId: schedules_list
      tags:
      - schedules
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schedule'
          description: ''
    post:
      operationId: schedules_create
      tags:
      - schedules
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Schedule'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Schedule'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Schedule'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Schedule'
          description: ''
  /api/schedules/{id}/:
    get:
      operationId: schedules_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this schedule.
        required: true
      tags:
      - schedules
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Schedule'
          description: ''
    put:
      operationId: schedules_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this schedule.
        required: true
      tags:
      - schedules
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Schedule'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Schedule'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Schedule'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Schedule'
          description: ''
    patch:
      operationId: schedules_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this schedule.
        required: true
      tags:
      - schedules
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSchedule'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSchedule'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSchedule'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Schedule'
          description: ''
    delete:
      operationId: schedules_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this schedule.
        required: true
      tags:
      - schedules
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/stickers/:
    get:
      operationId: stickers_list
      tags:
      - stickers
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Sticker'
          description: ''
    post:
      operationId: stickers_create
      tags:
      - stickers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Sticker'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Sticker'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Sticker'
        required: true
      security:
      - jwtAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sticker'
          description: ''
  /api/stickers/{id}/:
    get:
      operationId: stickers_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this sticker.
        required: true
      tags:
      - stickers
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sticker'
          description: ''
    put:
      operationId: stickers_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this sticker.
        required: true
      tags:
      - stickers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Sticker'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Sticker'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Sticker'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sticker'
          description: ''
    patch:
      operationId: stickers_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this sticker.
        required: true
      tags:
      - stickers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSticker'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSticker'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSticker'
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sticker'
          description: ''
    delete:
      operationId: stickers_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this sticker.
        required: true
      tags:
      - stickers
      security:
      - jwtAuth: []
      responses:
        '204':
          description: No response body
  /api/token/:
    post:
      operationId: token_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPair'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPair'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPair'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /api/token/refresh/:
    post:
      operationId: token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/uploads/{action}/:
    post:
      operationId: uploads_create
      description: S3アップロード用のURL発行または完了確認を行います。
      parameters:
      - in: path
        name: action
        schema:
          type: string
        required: true
      tags:
      - uploads
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UploadIssue'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UploadIssue'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadIssue'
        required: true
      security:
      - jwtAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadConfirm'
          description: ''
components:
  schemas:
    AssetRef:
      type: object
      properties:
        kind:
          $ref: '#/components/schemas/KindEnum'
        key:
          type: string
          description: localならblobURI/uuid, remoteならS3 key/URL
        mime:
          type: string
          nullable: true
        width:
          type: integer
          nullable: true
        height:
          type: integer
          nullable: true
        sha256:
          type: string
          nullable: true
        size:
          type: integer
          nullable: true
        filename:
          type: string
          nullable: true
        variants:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AssetRefLite'
          description: thumb, medium などのバリエーション
        source:
          type: object
          additionalProperties: {}
      required:
      - key
      - kind
    AssetRefLite:
      type: object
      properties:
        kind:
          $ref: '#/components/schemas/KindEnum'
        key:
          type: string
          description: localならblobURI/uuid, remoteならS3 key/URL
        mime:
          type: string
          nullable: true
        width:
          type: integer
          nullable: true
        height:
          type: integer
          nullable: true
        sha256:
          type: string
          nullable: true
      required:
      - key
      - kind
    ExcalidrawSceneData:
      type: object
      properties:
        elements:
          type: array
          items:
            type: object
            additionalProperties: {}
          description: Excalidrawの図形要素（Rectangle, Arrow, Text等）の配列
        appState:
          type: object
          additionalProperties: {}
          description: 画面表示に関する設定（theme, scrollX, scrollY, zoom等）
    Exhibit:
      type: object
      description: 展示物（編集/管理用）。画像はS3 URL（string）を想定。
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        gallery:
          type: string
          format: uuid
        owner:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        guestId:
          type: string
          readOnly: true
          nullable: true
        slotIndex:
          type: integer
          maximum: 2147483647
          minimum: 0
        imageOriginalUrl:
          type: string
          format: uri
          maxLength: 2048
        imageCutoutPngUrl:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
        materialParams: {}
        style:
          type: string
          maxLength: 50
        title:
          type: string
          maxLength: 255
        description:
          type: string
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
      required:
      - createdAt
      - gallery
      - guestId
      - id
      - imageOriginalUrl
      - owner
      - slotIndex
      - updatedAt
    ExhibitPublic:
      type: object
      description: 公開閲覧用：owner/guest_id などは返さない。
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        slotIndex:
          type: integer
          readOnly: true
        imageOriginalUrl:
          type: string
          format: uri
          readOnly: true
        imageCutoutPngUrl:
          type: string
          format: uri
          readOnly: true
          nullable: true
        materialParams:
          readOnly: true
        style:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
        description:
          type: string
          readOnly: true
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
      required:
      - createdAt
      - description
      - id
      - imageCutoutPngUrl
      - imageOriginalUrl
      - materialParams
      - slotIndex
      - style
      - title
      - updatedAt
    Gallery:
      type: object
      description: ギャラリー（編集/管理用）。retrieveではexhibitsも返す。
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        slug:
          type: string
          maxLength: 64
          pattern: ^[-a-zA-Z0-9_]+$
        userStyle:
          $ref: '#/components/schemas/UserStyleEnum'
        owner:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        guestId:
          type: string
          readOnly: true
          nullable: true
        title:
          type: string
          maxLength: 255
        layoutCols:
          type: integer
          maximum: 2147483647
          minimum: 0
        layoutRows:
          type: integer
          maximum: 2147483647
          minimum: 0
        isPublic:
          type: boolean
        coverRenderUrl:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        exhibits:
          type: array
          items:
            $ref: '#/components/schemas/Exhibit'
          readOnly: true
      required:
      - createdAt
      - exhibits
      - guestId
      - id
      - owner
      - slug
      - updatedAt
    GalleryPublic:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        slug:
          type: string
          readOnly: true
          pattern: ^[-a-zA-Z0-9_]+$
        title:
          type: string
          readOnly: true
        layoutCols:
          type: integer
          readOnly: true
        layoutRows:
          type: integer
          readOnly: true
        isPublic:
          type: boolean
          readOnly: true
        coverRenderUrl:
          type: string
          format: uri
          readOnly: true
          nullable: true
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        exhibits:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitPublic'
          readOnly: true
      required:
      - coverRenderUrl
      - createdAt
      - exhibits
      - id
      - isPublic
      - layoutCols
      - layoutRows
      - slug
      - title
      - updatedAt
    GuestIssueResponse:
      type: object
      properties:
        guestId:
          type: string
      required:
      - guestId
    KindEnum:
      enum:
      - local
      - remote
      type: string
      description: |-
        * `local` - local
        * `remote` - remote
    Notebook:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        cover:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        pageIds:
          type: array
          items:
            type: string
            format: uuid
          readOnly: true
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        title:
          type: string
          maxLength: 255
        description:
          type: string
        tags: {}
        viewSettings: {}
        visibility:
          $ref: '#/components/schemas/VisibilityEnum'
        owner:
          type: string
          format: uuid
          readOnly: true
        pages:
          type: array
          items:
            type: string
            format: uuid
          readOnly: true
      required:
      - createdAt
      - id
      - owner
      - pageIds
      - pages
      - title
      - updatedAt
    Page:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        assets:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AssetRef'
        preview:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        export:
          type: object
          additionalProperties: {}
          nullable: true
        sceneData:
          $ref: '#/components/schemas/ExcalidrawSceneData'
        usedStickerIds:
          type: array
          items:
            type: string
            format: uuid
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        type:
          $ref: '#/components/schemas/PageTypeEnum'
        date:
          type: string
          format: date
        title:
          type: string
          maxLength: 255
        note:
          type: string
        tags: {}
        layoutMode:
          type: string
          maxLength: 20
        layoutSettings: {}
        owner:
          type: string
          format: uuid
          readOnly: true
      required:
      - assets
      - createdAt
      - date
      - id
      - owner
      - updatedAt
    PageTypeEnum:
      enum:
      - diary
      - schedule
      - free
      type: string
      description: |-
        * `diary` - Diary
        * `schedule` - Schedule
        * `free` - Free
    PatchedExhibit:
      type: object
      description: 展示物（編集/管理用）。画像はS3 URL（string）を想定。
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        gallery:
          type: string
          format: uuid
        owner:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        guestId:
          type: string
          readOnly: true
          nullable: true
        slotIndex:
          type: integer
          maximum: 2147483647
          minimum: 0
        imageOriginalUrl:
          type: string
          format: uri
          maxLength: 2048
        imageCutoutPngUrl:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
        materialParams: {}
        style:
          type: string
          maxLength: 50
        title:
          type: string
          maxLength: 255
        description:
          type: string
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
    PatchedGallery:
      type: object
      description: ギャラリー（編集/管理用）。retrieveではexhibitsも返す。
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        slug:
          type: string
          maxLength: 64
          pattern: ^[-a-zA-Z0-9_]+$
        userStyle:
          $ref: '#/components/schemas/UserStyleEnum'
        owner:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        guestId:
          type: string
          readOnly: true
          nullable: true
        title:
          type: string
          maxLength: 255
        layoutCols:
          type: integer
          maximum: 2147483647
          minimum: 0
        layoutRows:
          type: integer
          maximum: 2147483647
          minimum: 0
        isPublic:
          type: boolean
        coverRenderUrl:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        exhibits:
          type: array
          items:
            $ref: '#/components/schemas/Exhibit'
          readOnly: true
    PatchedNotebook:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        cover:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        pageIds:
          type: array
          items:
            type: string
            format: uuid
          readOnly: true
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        title:
          type: string
          maxLength: 255
        description:
          type: string
        tags: {}
        viewSettings: {}
        visibility:
          $ref: '#/components/schemas/VisibilityEnum'
        owner:
          type: string
          format: uuid
          readOnly: true
        pages:
          type: array
          items:
            type: string
            format: uuid
          readOnly: true
    PatchedPage:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        assets:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AssetRef'
        preview:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        export:
          type: object
          additionalProperties: {}
          nullable: true
        sceneData:
          $ref: '#/components/schemas/ExcalidrawSceneData'
        usedStickerIds:
          type: array
          items:
            type: string
            format: uuid
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        type:
          $ref: '#/components/schemas/PageTypeEnum'
        date:
          type: string
          format: date
        title:
          type: string
          maxLength: 255
        note:
          type: string
        tags: {}
        layoutMode:
          type: string
          maxLength: 20
        layoutSettings: {}
        owner:
          type: string
          format: uuid
          readOnly: true
    PatchedSchedule:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        assets:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AssetRef'
        preview:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        sceneData:
          $ref: '#/components/schemas/ExcalidrawSceneData'
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        type:
          allOf:
          - $ref: '#/components/schemas/ScheduleTypeEnum'
          default: monthly
        startDate:
          type: string
          format: date
        title:
          type: string
          maxLength: 255
        eventsData: {}
        owner:
          type: string
          format: uuid
          readOnly: true
    PatchedSticker:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        png:
          $ref: '#/components/schemas/AssetRef'
        thumb:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        style: {}
        tags:
          type: array
          items:
            type: string
          description: タグの配列
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        name:
          type: string
          maxLength: 255
        favorite:
          type: boolean
        lastUsedAt:
          type: string
          format: date-time
          nullable: true
        usageCount:
          type: integer
          readOnly: true
        isSystem:
          type: boolean
        width:
          type: integer
          maximum: 2147483647
          minimum: 0
        height:
          type: integer
          maximum: 2147483647
          minimum: 0
        cropSource:
          nullable: true
        owner:
          type: string
          format: uuid
          readOnly: true
    PatchedUser:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 254
        displayName:
          type: string
          maxLength: 100
        avatar:
          nullable: true
        stripeCustomerId:
          type: string
          readOnly: true
          nullable: true
        subscriptionStatus:
          type: string
          readOnly: true
        plan:
          type: string
          maxLength: 50
    Schedule:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        assets:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AssetRef'
        preview:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        sceneData:
          $ref: '#/components/schemas/ExcalidrawSceneData'
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        type:
          allOf:
          - $ref: '#/components/schemas/ScheduleTypeEnum'
          default: monthly
        startDate:
          type: string
          format: date
        title:
          type: string
          maxLength: 255
        eventsData: {}
        owner:
          type: string
          format: uuid
          readOnly: true
      required:
      - assets
      - createdAt
      - id
      - owner
      - startDate
      - updatedAt
    ScheduleTypeEnum:
      enum:
      - monthly
      - weekly
      - daily
      type: string
      description: |-
        * `monthly` - Monthly
        * `weekly` - Weekly
        * `daily` - Daily
    Sticker:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        png:
          $ref: '#/components/schemas/AssetRef'
        thumb:
          allOf:
          - $ref: '#/components/schemas/AssetRef'
          nullable: true
        style: {}
        tags:
          type: array
          items:
            type: string
          description: タグの配列
        schemaVersion:
          type: integer
          maximum: 2147483647
          minimum: 0
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
        deletedAt:
          type: string
          format: date-time
          nullable: true
        name:
          type: string
          maxLength: 255
        favorite:
          type: boolean
        lastUsedAt:
          type: string
          format: date-time
          nullable: true
        usageCount:
          type: integer
          readOnly: true
        isSystem:
          type: boolean
        width:
          type: integer
          maximum: 2147483647
          minimum: 0
        height:
          type: integer
          maximum: 2147483647
          minimum: 0
        cropSource:
          nullable: true
        owner:
          type: string
          format: uuid
          readOnly: true
      required:
      - createdAt
      - height
      - id
      - owner
      - png
      - style
      - updatedAt
      - usageCount
      - width
    TokenObtainPair:
      type: object
      properties:
        email:
          type: string
          writeOnly: true
        password:
          type: string
          writeOnly: true
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - email
      - password
      - refresh
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    UploadConfirm:
      type: object
      description: アップロード完了報告（クライアント→サーバー）
      properties:
        uploadSessionId:
          type: string
          format: uuid
      required:
      - uploadSessionId
    UploadIssue:
      type: object
      description: アップロード開始要求（クライアント→サーバー）
      properties:
        filename:
          type: string
        mimeType:
          type: string
        purpose:
          type: string
      required:
      - filename
      - mimeType
      - purpose
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 254
        displayName:
          type: string
          maxLength: 100
        avatar:
          nullable: true
        stripeCustomerId:
          type: string
          readOnly: true
          nullable: true
        subscriptionStatus:
          type: string
          readOnly: true
        plan:
          type: string
          maxLength: 50
      required:
      - email
      - id
      - stripeCustomerId
      - subscriptionStatus
    UserRegistration:
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
        password:
          type: string
          writeOnly: true
          minLength: 8
        displayName:
          type: string
          maxLength: 100
      required:
      - email
      - password
    UserStyleEnum:
      enum:
      - user
      - guest
      type: string
      description: |-
        * `user` - User
        * `guest` - Guest
    VisibilityEnum:
      enum:
      - private
      - friends
      - public
      type: string
      description: |-
        * `private` - Private
        * `friends` - Friends Only
        * `public` - Public
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
